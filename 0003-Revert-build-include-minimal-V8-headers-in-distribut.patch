From 804555d0bf0014393883df59c471b42ed11d1f9e Mon Sep 17 00:00:00 2001
From: Stephen Gallagher <sgallagh@redhat.com>
Date: Fri, 2 Jul 2021 09:22:28 -0400
Subject: [PATCH 3/3] Revert "build: include minimal V8 headers in
 distribution"

This reverts commit 38f32386c138073c6a020ce79085daea15e7b800.
---
 tools/install.py | 17 ++++++-----------
 1 file changed, 6 insertions(+), 11 deletions(-)

diff --git a/tools/install.py b/tools/install.py
index b3ef4541999126c512e3811881388e0ec8d401c4..7c0b1ba999cdeacd3431b5334d650677754a9752 100755
--- a/tools/install.py
+++ b/tools/install.py
@@ -152,21 +152,16 @@ def files(action):
   if 'true' == variables.get('node_install_npm'): npm_files(action)
 
   headers(action)
 
 def headers(action):
-  def wanted_v8_headers(files_arg, dest):
-    v8_headers = [
-      'deps/v8/include/cppgc/common.h',
-      'deps/v8/include/v8.h',
-      'deps/v8/include/v8-internal.h',
-      'deps/v8/include/v8-platform.h',
-      'deps/v8/include/v8-profiler.h',
-      'deps/v8/include/v8-version.h',
-      'deps/v8/include/v8config.h',
+  def ignore_inspector_headers(files_arg, dest):
+    inspector_headers = [
+      'deps/v8/include/v8-inspector.h',
+      'deps/v8/include/v8-inspector-protocol.h'
     ]
-    files_arg = [name for name in files_arg if name in v8_headers]
+    files_arg = [name for name in files_arg if name not in inspector_headers]
     action(files_arg, dest)
 
   action([
     'common.gypi',
     'config.gypi',
@@ -182,11 +177,11 @@ def headers(action):
 
   # Add the expfile that is created on AIX
   if sys.platform.startswith('aix'):
     action(['out/Release/node.exp'], 'include/node/')
 
-  subdir_files('deps/v8/include', 'include/node/', wanted_v8_headers)
+  subdir_files('deps/v8/include', 'include/node/', ignore_inspector_headers)
 
   if 'false' == variables.get('node_shared_libuv'):
     subdir_files('deps/uv/include', 'include/node/', action)
 
   if 'true' == variables.get('node_use_openssl') and \
-- 
2.31.1

